---
import { getCollection } from "astro:content";
import noSQLImage from "../assets/image/noSQL.png";
import Layout from "../layouts/Layout.astro";

const posts = (await getCollection("veille")).sort((a, b) => {
  return new Date(b.data.date).getTime() - new Date(a.data.date).getTime();
});
---

<Layout>
  <div class="veille-container">
    <h1>Veille : NoSQL</h1>

    <h2>Qu’est-ce que c’est le NoSQL ?</h2>
    <p>
      Le NoSQL est un SGBD de données de type non relationnelle. Ce type de base de données n’utilise pas le schéma sous forme de tableau qui sont généralement présent dans les bases de données
      traditionnels.
    </p>

    <h2>À quoi sert-il ?</h2>
    <p>
      Les bases de données NoSQL sont souvent utilisées dans les services web ou bien le big data en temps réel, car cette base de données à comme avantage de proposer une bonne flexibilité,
      évolutivité, disponibilité et de hautes performances.
    </p>

    <h2>Les différents types de bases de données NoSQL :</h2>
    <div class="nosql-types">
      <img src={noSQLImage.src} alt="Types de bases de données NoSQL" class="nosql-diagram" />
      <ul>
        <li>
          <strong>Document</strong> - Ce type de bases de données sont utilisées pour stocker, extraire, et gérer des données semi-structurées
          <br /><em>Exemples : MongoDB, Amazon DocumentDB</em>
        </li>
        <li>
          <strong>Graphe</strong> - Ce type de bases de données organise les données en tant que point et des relations, qui indique les connexions entre ces points
          <br /><em>Exemples : Neo4j, Amazon Neptune</em>
        </li>
        <li>
          <strong>Valeur clé</strong> - Ce type de bases de données stockent les données sous formes de paires de clé, sur lequel chaque valeurs est associée à une clé unique
          <br /><em>Exemples : Redis, Amazon DynamoDB</em>
        </li>
        <li>
          <strong>Colonne large</strong> - Ce type de bases de données stockent les données sous formes de tables, de lignes, et de colonnes
          <br /><em>Exemples : Apache Cassandra, HBase</em>
        </li>
      </ul>
    </div>

    <h2>Outils de veille</h2>
    <ul>
      <li><strong>Feedly</strong> - agregateur de flux RSS pour suivre les sites specialises</li>
      <li><strong>Google Alerts</strong> - alertes automatiques par mots-cles ("NoSQL", "MongoDB", "Big Data")</li>
      <li>
        <strong>Flipboard</strong> - outil de curation de contenu visuellement attrayant pour suivre des sujets et des mots clés, avec magazines personnalisés. Les articles sont bien sélectionnés et pertinents
      </li>
      <li>
        <strong>Talkwalker Alerts</strong> - alternative intéressante à Google Alert. Permet de créer des alertes sur des mots clés et d’envoyer des notifications par email. L’interface est simple d’utilisation
        et permet de gérer plusieurs alertes. Cependant, le contenu des alertes peut parfois manquer de pertinence, similaire à Google Alert, surtout pour des sujets très spécifiques.
        <br />Mot clés : "NoSQL, Database, SGBD, Oracle, DB, et autres."
      </li>
      <li>
        <strong>Inoreader</strong> - Inoreader est une plateforme similaire à Feedly, offrant une interface bien organisée et facile à utiliser. Il permet de suivre des flux RSS, des mots clés, et même
        des réseaux sociaux comme Twitter. Cet outil est apprécié pour sa capacité à offrir une large sélection d'articles pertinents, particulièrement dans le domaine de la technologie et des bases de
        données, ce qui le rend très utile pour des sujets comme NoSQL et les SGBD. Une fonctionnalité intéressante est la possibilité de sauvegarder et de taguer des articles pour une consultation ultérieure.
        <br />Mot clés : "NoSQL, Database, SGBD, Oracle, DB, et autres."
        <br />Sites : "InfoQ - NoSQL, Human Coders News - NoSQL, MyNoSQL"
      </li>
      <li>
        <strong>FlipRSS</strong> - FlipRSS est un outil qui permet de transformer des flux RSS en magazines interactifs, un peu à la manière de Flipboard. Il est simple d’utilisation et offre une présentation
        agréable des contenus suivis. L’outil est apprécié pour sa capacité à organiser les informations de manière visuelle, ce qui rend la veille plus agréable. Cependant, il est moins robuste pour des
        recherches très pointues, et certains flux peuvent manquer de profondeur technique.
        <br />Mot clés : "NoSQL, Database, SGBD, Oracle, DB, et autres."
        <br />Sites : "InfoQ - NoSQL, Human Coders News - NoSQL, MyNoSQL"
      </li>
    </ul>

    <h2>Presentation du bornage</h2>
    <p>La veille se concentre sur deux axes principaux :</p>
    <ul>
      <li><strong>BDnoSQL</strong> - Technologies et innovations spécifiques aux bases de données NoSQL</li>
      <li><strong>bigdata</strong> - Applications et enjeux du Big Data</li>
    </ul>

    <h2>Mise en oeuvre</h2>
    <p>
      Cette veille me permet de suivre l'evolution des technologies de stockage et de gestion de donnees. Elle nourrit mes competences en developpement et en architecture logicielle, et m'aide a mieux
      comprendre les besoins des entreprises dans le Big Data et le Cloud.
    </p>
    <p>
      J'ai pris un TP de C# et l'ai adapté pour utiliser des bases de données NoSQL. Cette adaptation m'a permis de mettre en pratique les concepts de bases de données non relationnelles avec MongoDB,
      en développant une application de gestion de radar.
    </p>

    <div class="screenshots">
      <div class="screenshot-item">
        <h3>Base de données MongoDB</h3>
        <img src="/images/MongoDBCompass.png" alt="MongoDB Compass - Collection Immatriculations" />
        <p>Visualisation de la collection "Immatriculations" dans MongoDB Compass avec les documents enregistrés.</p>
      </div>

      <div class="screenshot-item">
        <h3>Interface de l'application</h3>
        <img src="/images/App.png" alt="Interface Nouveau Radar" />
        <p>Interface de l'application permettant d'ajouter un nouveau radar et d'afficher l'historique des passages.</p>
      </div>

      <div class="screenshot-item">
        <h3>Container Docker MongoDB</h3>
        <img src="/images/DockerPS.png" alt="Docker PS - MongoDB Container" />
        <p>Container Docker exécutant MongoDB en local pour le développement.</p>
      </div>
    </div>

    <h2>Mes articles de veille</h2>

    <div class="filter-buttons">
      <button class="filter-button active" data-filter="all">Tous les articles</button>
      <button class="filter-button" data-filter="bdnoSQL">BDnoSQL</button>
      <button class="filter-button" data-filter="bigdata">bigdata</button>
    </div>

    <section class="post-list" id="post-list">
      {
        posts.map((item, index) => (
          <div class="post-item" data-index={index} data-boundary={item.data.boundaries[0]}>
            <a class="post-link" href={`/veille/${item.id}`}>
              {item.data.title}
            </a>
            <span class="post-tag">{item.data.boundaries[0]}</span>
          </div>
        ))
      }
    </section>

    <nav class="pagination" id="pagination">
      <span class="page-info" id="page-info"></span>
      <div class="pagination-buttons" id="pagination-buttons"></div>
    </nav>
  </div>
</Layout>

<style>
  .veille-container {
    max-width: 750px;
    margin: 2rem auto;
    padding: 0 1rem;
    font-family: system-ui, sans-serif;
    line-height: 1.6;
  }

  h1 {
    text-align: center;
    margin-bottom: 1.5rem;
    font-size: 2rem;
  }

  h2 {
    margin-top: 1.5rem;
    font-size: 1.3rem;
    border-left: 4px solid #0070f3;
    padding-left: 0.5rem;
  }

  ul {
    margin: 0.5rem 0 1rem 1.2rem;
  }

  .post-list {
    margin-top: 2rem;
  }

  .post-item {
    margin-bottom: 1rem;
    display: none;
    padding: 0.75rem;
    background: #f8f9fa;
    border-radius: 6px;
    transition: background 0.2s ease;
  }

  .post-item:hover {
    background: #e9ecef;
  }

  .post-item.visible {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 1rem;
  }

  .post-link {
    text-decoration: none;
    color: #0070f3;
    font-weight: 600;
    font-size: 1.1rem;
    border-bottom: 2px solid transparent;
    transition: border-color 0.3s ease;
    flex: 1;
  }

  .post-link:hover {
    border-color: #0070f3;
  }

  .post-tag {
    background: linear-gradient(135deg, #0070f3 0%, #0056d2 100%);
    color: white;
    padding: 0.35rem 0.75rem;
    border-radius: 20px;
    font-size: 0.85rem;
    font-weight: 600;
    white-space: nowrap;
  }

  .filter-buttons {
    display: flex;
    gap: 1rem;
    margin-bottom: 2rem;
    flex-wrap: wrap;
    justify-content: center;
  }

  .filter-button {
    padding: 0.75rem 1.5rem;
    border: 2px solid #e2e8f0;
    background: white;
    border-radius: 50px;
    font-weight: 600;
    font-size: 0.95rem;
    cursor: pointer;
    transition: all 0.3s ease;
    color: #1e293b;
  }

  .filter-button:hover {
    border-color: #0070f3;
    color: #0070f3;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 112, 243, 0.2);
  }

  .filter-button.active {
    background: linear-gradient(135deg, #0070f3 0%, #0056d2 100%);
    color: white;
    border-color: #0070f3;
    box-shadow: 0 4px 16px rgba(0, 112, 243, 0.4);
  }

  .nosql-types {
    display: block;
    margin: 1.5rem 0;
  }

  .nosql-diagram {
    width: 100%;
    max-width: 500px;
    height: auto;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    margin: 1rem auto 1.5rem auto;
    display: block;
  }

  .nosql-types ul {
    margin: 0;
    padding-left: 1.2rem;
  }

  .pagination {
    margin-top: 3rem;
    padding-top: 2rem;
    border-top: 1px solid #e2e8f0;
    text-align: center;
  }

  .page-info {
    display: block;
    margin-bottom: 1.5rem;
    color: #64748b;
    font-size: 0.95rem;
    font-weight: 500;
  }

  :global(.pagination-buttons) {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 0.75rem;
    flex-wrap: wrap;
  }

  :global(.pagination-button) {
    min-width: 44px;
    height: 44px;
    padding: 0 1rem;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    text-decoration: none;
    color: #1e293b;
    border: 2px solid transparent;
    border-radius: 50px;
    font-weight: 600;
    font-size: 0.95rem;
    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    background: white;
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    position: relative;
    overflow: hidden;
  }

  :global(.pagination-button::before) {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(0, 112, 243, 0.1);
    transform: translate(-50%, -50%);
    transition:
      width 0.4s,
      height 0.4s;
  }

  :global(.pagination-button:hover::before) {
    width: 120%;
    height: 120%;
  }

  :global(.pagination-button:hover:not(.active)) {
    background: white;
    border-color: #0070f3;
    color: #0070f3;
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(0, 112, 243, 0.2);
  }

  :global(.pagination-button.active) {
    background: linear-gradient(135deg, #0070f3 0%, #0056d2 100%);
    color: white;
    border-color: #0070f3;
    cursor: default;
    box-shadow: 0 4px 16px rgba(0, 112, 243, 0.4);
    transform: scale(1.05);
  }

  :global(.pagination-button:active:not(.active)) {
    transform: translateY(0);
    box-shadow: 0 2px 6px rgba(0, 112, 243, 0.25);
  }

  @media (max-width: 768px) {
    .nosql-diagram {
      max-width: 100%;
    }

    :global(.pagination-buttons) {
      gap: 0.3rem;
    }

    :global(.pagination-button) {
      padding: 0.4rem 0.8rem;
      font-size: 0.9rem;
    }
  }

  .screenshots {
    display: flex;
    flex-direction: column;
    gap: 2rem;
    margin-top: 2rem;
  }

  .screenshot-item {
    background: #f8f9fa;
    padding: 1.5rem;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }

  .screenshot-item h3 {
    color: #1e293b;
    margin-top: 0;
    margin-bottom: 1rem;
    font-size: 1.2rem;
  }

  .screenshot-item img {
    width: 100%;
    height: auto;
    border-radius: 4px;
    margin-bottom: 1rem;
    border: 1px solid #e2e8f0;
  }

  .screenshot-item p {
    color: #64748b;
    font-size: 0.95rem;
    font-style: italic;
    margin: 0;
  }
</style>

<script>
  const ITEMS_PER_PAGE = 10;
  let currentPage = 1;
  let currentFilter = "all";

  const postItems = document.querySelectorAll(".post-item");
  const filterButtons = document.querySelectorAll(".filter-button");

  function getFilteredItems() {
    if (currentFilter === "all") {
      return Array.from(postItems);
    }
    return Array.from(postItems).filter((item) => {
      const boundary = item.getAttribute("data-boundary");
      return boundary === currentFilter;
    });
  }

  function showPage(page: number) {
    currentPage = page;
    const filteredItems = getFilteredItems();
    const totalItems = filteredItems.length;
    const totalPages = Math.ceil(totalItems / ITEMS_PER_PAGE);

    // Masquer tous les articles
    postItems.forEach((item) => {
      item.classList.remove("visible");
    });

    // Afficher les articles filtrés pour la page actuelle
    const start = (page - 1) * ITEMS_PER_PAGE;
    const end = start + ITEMS_PER_PAGE;

    filteredItems.slice(start, end).forEach((item) => {
      item.classList.add("visible");
    });

    // Mettre à jour l'info de page
    const pageInfo = document.getElementById("page-info");
    if (pageInfo) {
      pageInfo.textContent = `Page ${page} sur ${totalPages} (${totalItems} articles)`;
    }

    // Mettre à jour les boutons
    updatePaginationButtons(totalPages);
  }

  function updatePaginationButtons(totalPages: number) {
    const buttonsContainer = document.getElementById("pagination-buttons");
    if (!buttonsContainer) return;

    buttonsContainer.innerHTML = "";

    // Bouton Précédent
    if (currentPage > 1) {
      const prevButton = document.createElement("button");
      prevButton.className = "pagination-button";
      prevButton.textContent = "← Précédent";
      prevButton.onclick = () => showPage(currentPage - 1);
      buttonsContainer.appendChild(prevButton);
    }

    // Boutons de numéros de page
    for (let i = 1; i <= totalPages; i++) {
      const pageButton = document.createElement("button");
      pageButton.className = `pagination-button ${i === currentPage ? "active" : ""}`;
      pageButton.textContent = i.toString();
      pageButton.onclick = () => showPage(i);
      buttonsContainer.appendChild(pageButton);
    }

    // Bouton Suivant
    if (currentPage < totalPages) {
      const nextButton = document.createElement("button");
      nextButton.className = "pagination-button";
      nextButton.textContent = "Suivant →";
      nextButton.onclick = () => showPage(currentPage + 1);
      buttonsContainer.appendChild(nextButton);
    }
  }

  // Gestion des filtres
  filterButtons.forEach((button) => {
    button.addEventListener("click", () => {
      // Mettre à jour les classes actives
      filterButtons.forEach((btn) => btn.classList.remove("active"));
      button.classList.add("active");

      // Mettre à jour le filtre actuel
      currentFilter = button.getAttribute("data-filter") || "all";

      // Réinitialiser à la page 1 et afficher
      showPage(1);
    });
  });

  // Initialiser l'affichage
  const filteredItems = getFilteredItems();
  const totalPages = Math.ceil(filteredItems.length / ITEMS_PER_PAGE);

  if (totalPages > 1) {
    showPage(1);
  } else {
    // Si une seule page, afficher tous les articles filtrés
    filteredItems.forEach((item) => item.classList.add("visible"));
    const pagination = document.getElementById("pagination");
    if (pagination && filteredItems.length <= ITEMS_PER_PAGE) {
      pagination.style.display = "none";
    }
  }
</script>
